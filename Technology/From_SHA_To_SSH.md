## From SHA to SSH

> 信息的加密和解密在计算机通信中是时刻存在的，因为它是计算机通信安全的基石，这样一个庞大的知识领域想一下子弄清楚是很难的，但是只要我们梳理一下，从几个关键的概念入手，顺序渐进，由浅入深，计算机网络中的信息安全大门我们肯定能进去的！   
> 我在这里整理了一些网络上的资源，希望能对大家学习这方面的知识有些帮助。

## MD5, SHA-1 是什么
md5, sha-1 是两种加密算法，它们将数据进行分组散列，最后生成固定长度的数字摘要，只要摘要足够长，这种加密是不可逆转的。  
通过这些加密算法可以判断输入的原始信息在信息网络的传输中是否正确（是否被更改过）。

具体请参考：[数字签名算法MD5和SHA-1的比较](http://stark-summer.iteye.com/blog/1313884)   

这篇文章从计算机中的Hash函数入手，简要介绍了MD4、MD5、SHA-1等单向散列算法的诞生和发展。  
文章最后还比较了当前网络中使用最多的两种加密算法(md5, sha-1)的各自特点。

## 公钥，私钥
单向hash加密算法的使用范围是有限的，在当前的网络通信中，还需要更多加密算法的支持，"公钥加密算法"可能就是其中最常用的之一了。

这里有一篇讲的很生动的文章：[公钥, 私钥 和 SSL](http://chenling1018.blog.163.com/blog/static/1480254201058112410789/)  

大家可以多留意文章提到的数字证书的概念，这对理解下文中提到的SSL/SSH有很大帮助。


## RSA 加密算法
上一章节参考文章中提到的"密钥加密算法"，指的就鼎鼎大名的RSA加密算法，其原理可以参考阮一峰先生整理的网络日志：

[RSA算法原理（一）](http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html)  
[RSA算法原理（二）](http://www.ruanyifeng.com/blog/2013/07/rsa_algorithm_part_two.html)


## SSL (Secure Sockets Layer) 与  TLS(Transport Layer Security)
提到计算机的信息通信安全，就不得不说到互联网的通信安全。而互联网的通信安全，建立在SSL/TLS协议之上。

SSL/TLS协议是为了解决三大风险而设计的，它希望在互联网通信中： 

- 所有信息都是加密传播，第三方无法窃听。
- 具有校验机制，一旦被篡改，通信双方会立刻发现。
- 配备身份证书，防止身份被冒充。

SSL/TLS协议的基本过程是这样的： 

1. 客户端向服务器端索要并验证公钥。
2. 双方协商生成"对话密钥"。
3. 双方采用"对话密钥"进行加密通信。

协议的具体运行机制可以参考以下几篇网络日志:  
[SSL/TLS协议运行机制的概述](http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html)  
[Https(SSL/TLS)原理详解](http://www.fenesky.com/blog/2014/07/19/how-https-works.html)


---
> RSA 在计算机通信领域使用的一个例子就是SSH工具。  
> SSH的英文全称是Secure Shell。通过使用SSH，你可以把所有传输的数据进行加密并压缩，这样可以有效防止“中间人”攻击方，而且也能够防止DNS和IP欺骗。由于SSH加密后数据是经过压缩的，所以还可以加快传输的速度。

## SSH 与 SCP
Linux下有很多用于网络传输，远程控制的工具，如rsh、FTP、POP和Telnet。但是它们在网络上用明文传送数据、用户帐号和用户口令，很容易受到中间人（man-in-the-middle）攻击方式的攻击。故需要更加安全的方式，于是就诞生了SSH。

而SCP就是SSH协议下的不同网络间的传输命令。

具体请参考以下两篇文章：  
[SSH原理之图文详解](http://forlinux.blog.51cto.com/8001278/1352900)  
[SSH与SCP小指南](http://www.cnblogs.com/beginman/p/3757160.html)

## SSH 与 SSL/TLS 的区别

1. ssl在通讯链路的附加层, 可以包含很多协议: https, ftps, .....; ssh只是加密的shell, 最初是用来替代telnet的。通过端口映射, 也可以让其他协议通过ssh的隧道而起到加密的效果。
2. SSL是一种国际标准的加密及身份认证通信协议，您用的浏览器就支持此协议。SSL（Secure Sockets Layer）最初是由美国Netscape公司研究出来的，后来成为了Internet网上安全通讯与交易的标准。SSL协议使用通讯双方的客户证书以及CA根证书，允许客户/服务器应用以一种不能被偷听的方式通讯，在通讯双方间建立起了一条安全的、可信任的通讯通道。它具备以下基本特征：信息保密性、信息完整性、相互鉴定。 主要用于提高应用程序之间数据的安全系数。SSL协议的整个概念可以被总结为：一个保证任何安装了安全套接字的客户和服务器间事务安全的协议，它涉及所有TC/IP应用程序。
3. SSH的英文全称是Secure SHell。通过使用SSH，你可以把所有传输的数据进行加密，这样“中间人”这种攻击方式就不可能实现了，而且也能够防止DNS和IP欺骗。还有一个额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度。SSH有很多功能，它既可以代替telnet，又可以为ftp、pop、甚至ppp提供一个安全的“通道”。SSH是由客户端和服务端的软件组成的，有两个不兼容的版本分别是：1.x和2.x。用SSH 2.x的客户程序是不能连接到SSH 1.x的服务程序上去的。OpenSSH 2.x同时支持SSH 1.x和2.x。SSH的安全验证是如何工作的从客户端来看，SSH提供两种级别的安全验证。第一种级别（基于口令的安全验证）只要你知道自己帐号和口令，就可以登录到远程主机。所有传输的数据都会被加密，但是不能保证你正在连接的服务器就是你想连接的服务器。可能会有别的服务器在冒充真正的服务器，也就是受到“中间人”这种方式的攻击。第二种级别（基于密匙的安全验证）需要依靠密匙，也就是你必须为自己创建一对密匙，并把公用密匙放在需要访问的服务器上。如果你要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的密匙进行安全验证。服务器收到请求之后，先在你在该服务器的家目录下寻找你的公用密匙，然后把它和你发送过来的公用密匙进行比较。如果两个密匙一致，服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件。客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器。用这种方式，你必须知道自己密匙的口令。但是，与第一种级别相比，第二种级别不需要在网络上传送口令。第二种级别不仅加密所有传送的数据，而且“中间人”这种攻击方式也是不可能的（因为他没有你的私人密匙）。但是整个登录的过程可能需要10秒。
